<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <template id="report_invoice_payment_mode" inherit_id="account_payment_partner.report_invoice_payment_mode">
    <xpath expr="//p[@t-if='o.payment_mode_id.note']" position="replace"/>
    <xpath expr="//p[@t-as='partner_bank']/.." position="replace"/>
  </template>
  <template id="report_invoice_document" inherit_id="account_views_extension.report_invoice_document">
    <xpath expr="//div[@name='beneficiary']" position="inside">
      <div class="row" t-if="o.payment_mode_id and o.payment_mode_id.show_bank_account != 'no'">
        <p t-foreach="o.partner_banks_to_show()" t-as="partner_bank">
          <t t-if="partner_bank.bank_id">
            <t t-esc="partner_bank.bank_id.name + ('' if not partner_bank.bank_id.bic else ' (' + partner_bank.bank_id.bic + ')')" /><br/>
          </t>
          <t t-if="o.payment_mode_id.show_bank_account == 'full'">
            <span t-field="partner_bank.acc_number"/><br/>
          </t>
          <t t-elif="o.payment_mode_id.show_bank_account == 'first'">
            <span t-esc="partner_bank.acc_number[:o.payment_mode_id.show_bank_account_chars] + '*' * (len(partner_bank.acc_number) - o.payment_mode_id.show_bank_account_chars)"/>
            <br/>
          </t>
          <t t-elif="o.payment_mode_id.show_bank_account == 'last'">
            <span t-esc="'*' * (len(partner_bank.acc_number) - o.payment_mode_id.show_bank_account_chars) + partner_bank.acc_number[-o.payment_mode_id.show_bank_account_chars:]"/>
            <br/>
          </t>
        </p>
      </div>
    </xpath>
  </template>
</odoo>
