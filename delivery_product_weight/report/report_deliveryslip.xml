<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="report_delivery_document" inherit_id="stock_views_extension.report_delivery_document">
        <xpath expr="//table[2]//thead//tr/th[last()]" position="after">
            <th><strong>Weight</strong></th>
        </xpath>
        <xpath expr="//span[@t-field='move.product_uom']/.." position="after">
            <td class="text-nowrap">
                <t t-if="move.product_weight > 0">
                    <span t-esc="move.product_weight * move.product_uom_qty"/>
                </t>
                <t t-else="">
                    <span t-esc="move.product_id.weight * move.product_uom_qty"/>
                </t>
                    <span t-field="move.picking_id.weight_uom_id"/>
            </td>
        </xpath>
        <xpath expr="//table[3]//thead//tr/th[last()]" position="after">
            <th class="text-right"><strong>Weight</strong></th>
            <th class="text-right"><strong>Total</strong></th>
        </xpath>
        <xpath expr="//span[@t-esc='move_qty']/.." position="after">
            <td class="text-right text-nowrap">
                <span t-field="move_line.product_weight" t-options='{"widget": "float", "precision": 1}'/>
                <span t-field="move_line.product_id.weight_uom_id"/>
            </td>
            <td class="text-right text-nowrap">
                <t t-if="move_line.product_weight > 0">
                    <span t-esc="move_line.product_weight * move_line.quantity_done" t-options='{"widget": "float", "precision": 1}'/>
                </t>
                <t t-else="">
                    <span t-esc="move_line.product_id.weight * move_line.quantity_done" t-options='{"widget": "float", "precision": 1}'/>
                </t>
                <span t-field="move_line.product_id.weight_uom_id"/>
            </td>
        </xpath>
    </template>
</odoo>
